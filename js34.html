<!DOCTYPE html>
<html lang="pt">
	<head>
		<meta charset="utf-8">
		<title>AJAX: Introdução</title>
		<script>
			/* AJAX convencionalmente fazia-se com a class XMLHttpRequest */
			const xhr = new XMLHttpRequest();

			xhr.addEventListener("load", () => {

				const users = JSON.parse(xhr.responseText);

				/* esta variante do FOR permite escrever ciclos básicos sobre arrays mais rapidamente
				   vai gerar uma variavel temporaria que é o valor individual por cada iteração
				   chama-se a esta sintaxe: for ... of 
				*/
				for(let user of users) {
					console.log( user.email); 
				}

			});

			xhr.open("GET", "https://jsonplaceholder.typicode.com/users");
			
			xhr.send();

			/* na era moderna, usamos algo diferente chamado de Fetch API
			   o fetch() trabalha com um conceito de asincronismo chamado Promises
			   que significa que cada passo adicional ao processo é colocado num "depois"... num "then"
			   para que esses passos ocorram sincronizados como esperado em sequência
			*/
			fetch("https://jsonplaceholder.typicode.com/posts")
			.then(function(response) {
				return response.json();
			})
			.then(function(posts) {
				//console.log(posts);
				/* exercício: mostrar o title de cada post na consola */
				for(let post of posts) {
					console.log("Título deste post:", post.title);
				}
			});
		</script>
	</head>
	<body>
	</body>
</html>